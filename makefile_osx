# BASE
P = /usr/local/bin
HOMEBREW = $(P)/brew

export P

## Source Code Pro font
FONTDIR = $(HOME)/Library/Fonts
SCP = $(FONTDIR)/SourceCodePro*
SCP_URL = 'https://github.com/adobe-fonts/source-code-pro/archive/1.017R.zip'

# TARGETS

all: homebrew $(SCP) $(APPS)
	$(MAKE) -f makefile_common -L

$(P)/wget: homebrew

homebrew: $(HOMEBREW)
	brew brewdle
	echo "Update npm via npm install -g npm"

$(HOMEBREW):
	ruby -e "$$(curl -fsSL https://raw.github.com/Homebrew/homebrew/go/install)"
	brew tap Homebrew/brewdler

$(SCP): $(P)/wget
	wget -O SourceCodePro.zip $(SCP_URL)
	mkdir -p $(FONTDIR)
	unzip -jo SourceCodePro.zip *.otf  -d $(FONTDIR)
	touch $(SCP)
	rm SourceCodePro.zip
